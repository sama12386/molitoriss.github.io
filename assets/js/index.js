var events = [
  {
    "name": "The Comedy of Errors",
    "year": "2019",
    "venue": "Philip Chosky Theater, 2019",
    "blurb": "",
    "description": "Photos courtesy of <a href=\"https://www.lbsphoto.com\" target=\"_blank\">Louis Stein</a>",
    "column": "theatre",
    "images": [
      "theatre/2019comedy/comedy1.jpg",
      "theatre/2019comedy/comedy2.jpg",
      "theatre/2019comedy/comedy3.jpg",
      "theatre/2019comedy/comedy4.jpg",
      "theatre/2019comedy/comedy5.jpg",
      "theatre/2019comedy/comedy6.jpg"
    ]
  },
  {
    "name": "Stumpy Legs Too Short",
    "year": "2018",
    "venue": "Helen Wayne Rauh Studio Theater, 2018",
    "blurb": "A post-dramatic play about a young girl suffering from abuse. The lighting explored her multi-faceted psyche through striking color, shadow play, and sharp angles.",
    "position": "Lighting Designer",
    "description": "Written by Katja Brunner<br />Directed by Bronwyn Donohue<br />Scenic Design: Alex Kaplan<br />Costume Design: Stefan Romero<br />Lighting Design: <b>Sam Molitoriss</b><br />Media Design: Sophie Chen<br />Photos courtesy of <a href=\"https://www.lbsphoto.com\" target=\"_blank\">Louis Stein</a>",
    "column": "theatre",
    "images": [
      "theatre/2018stumpylegs/stumpy_legs-1.jpg",
      "theatre/2018stumpylegs/stumpy_legs-2.jpg",
      "theatre/2018stumpylegs/stumpy_legs-3.jpg",
      "theatre/2018stumpylegs/stumpy_legs-4.jpg",
      "theatre/2018stumpylegs/stumpy_legs-9.jpg"
    ]
  },
  {
    "name": "See What I Wanna See",
    "year": "2017",
    "venue": "Helen Wayne Rauh Studio Theater, 2017",
    "blurb": "A musical about a murder investigation from four different perspectives. The lighting sets the tone of the interrogation room using harsh white beams, and then morphs into each of the four worlds of the night in question, supporting the themes of memory and truth.",
    "position": "Lighting Designer",
    "description": "Music, Lyrics and Book by Michael John LaChiusa<br />Directed by Catherine Moore<br />Lighting Design: <b>Sam Molitoriss</b>, Jasmine Lesane, Chazz Malott and Jacob Wesson",
    "column": "theatre",
    "images": [
      "theatre/2017seewhatiwannasee/see_what_i_wanna_see-1.jpg",
      "theatre/2017seewhatiwannasee/see_what_i_wanna_see-2.jpg",
      "theatre/2017seewhatiwannasee/see_what_i_wanna_see-3.jpg",
      "theatre/2017seewhatiwannasee/see_what_i_want_to_see_4_edited.jpg"
    ]
  },
  {
    "name": "Expedition",
    "year": "2015",
    "venue": "NYTW - 4th Street Theater, 2015",
    "blurb": "A play that parallels the contemporary lives of two young men in a long-distance relationship with that of the explorers Lewis and Clark. Utilizing difference in color temperature, intensity of fill light, and projected textures, the lighting emphasized the growing rift between the characters.",
    "position": "Lighting Designer",
    "description": "Written by Rae Binstock<br />Directed by Alex Tobey<br />Scenic Design: Jessica Baldinger<br />Costume Design: Olivia Hern<br />Lighting Design: <b>Sam Molitoriss</b><br />Sound Design: Rob Silverman-Ascher<br />Photos courtesy of Emma Young",
    "column": "theatre",
    "images": [
      "theatre/2015expedition/expedition-1.jpg",
      "theatre/2015expedition/expedition-2.jpg",
      "theatre/2015expedition/expedition-3.jpg",
      "theatre/2015expedition/expedition-4.jpg"
    ]
  },
  {
    "name": "Lunar Gala 2019",
    "year": "2019",
    "venue": "Wiegand Gymnasium, 2019",
    "blurb": "One of the largest fashion shows in Pittsburgh, Lunar Gala is a collection of student-designed and produced clothing lines. Interspersed with contemporary dances, this year's design featured a wishbone-shaped runway, bringing the models farther out into the audience.",
    "position": "Production & Lighting Designer",
    "description": "Carnegie Mellon University - Wiegand Gymnasium<br />Produced by CMU Lunar Gala<br />Production & Lighting Design: <br /><b>Sam Molitoriss</b><br />Sound Design: Rachel Kolb<br />Media Design: Sophie Chen<br />Photos courtesy of CMU Lunar Gala",
    "column": "live",
    "images": [
      "live/2019lunargala/lg2019-2.jpg",
      "live/2019lunargala/lg2019-1.jpg",
      "live/2019lunargala/lg2019-3.jpg",
      "live/2019lunargala/lg2019-5.jpg",
      "live/2019lunargala/lg2019-4.jpg"
    ]
  },
  {
    "name": "Wale Concert",
    "year": "2018",
    "venue": "Carnegie Mellon Main Quad, 2018",
    "blurb": "",
    "position": "Lighting Designer",
    "description": "Carnegie Mellon University<br />Produced by CMU Activities Board<br />Production & Lighting Design: <br /><b>Sam Molitoriss</b><br />Sound Design: Scott MacDonald<br />Video Design: Kenny Cohen<br />Photos courtesy of Noah Hull",
    "column": "live",
    "images": [
      "live/2018wale/wale-2.jpg",
      "live/2018wale/wale-1.jpg",
      "live/2018wale/wale-3.jpg",
      "live/2018wale/wale-4.jpg",
      "live/2018wale/wale-5.jpg",
      "live/2018wale/wale-6.jpg",
      "live/2018wale/wale-7.jpg",
      "live/2018wale/wale-8.jpg",
      "live/2018wale/wale-9.jpg"
    ]
  },
  {
    "name": "Lunar Gala 2018",
    "year": "2018",
    "venue": "Wiegand Gymnasium, 2018",
    "blurb": "One of the largest fashion shows in Pittsburgh, Lunar Gala is a collection of student-designed and produced clothing lines. Interspersed with contemporary dances, this year's show was an exploration of human natural instinct, unbound by society.",
    "position": "Production & Lighting Designer",
    "description": "Carnegie Mellon University - Wiegand Gymnasium<br />Produced by CMU Lunar Gala<br />Production & Lighting Design: <br /><b>Sam Molitoriss</b><br />Sound Design: William Lowe<br />Media Design: Sophie Chen<br />Photos courtesy of CMU Lunar Gala",
    "column": "live",
    "images": [
      "live/2018lunargala/lunar_gala_2018-1.jpg",
      "live/2018lunargala/lunar_gala_2018-2.jpg",
      "live/2018lunargala/lunar_gala_2018-3.jpg",
      "live/2018lunargala/lunar_gala_2018-4.jpg",
      "live/2018lunargala/lunar_gala_2018-5.jpg",
      "live/2018lunargala/lunar_gala_2018-6.jpg",
      "live/2018lunargala/lunar_gala_2018-7.jpg",
      "live/2018lunargala/lunar_gala_2018-8.jpg",
      "live/2018lunargala/lunar_gala_2018-9.jpg"
    ]
  },
  {
    "name": "Tepper Quadrangle Grand Opening",
    "year": "2018",
    "venue": "David A. Tepper Quadrangle, 2018",
    "blurb": "Embracing the open construction of the first building of the David A. Tepper quadrangle, this event featured a spoken program on stage and a grand ribbon cutting in the center of the atrium. I needed lighting on stage for the IMAG and broadcast, but it needed to be subtle so the focus was on the space. During dinner, a soft and comfortable environment was established that allowed guests to appreciate the architecture of the auditorium.",
    "position": "Lighting Designer & Event Consultant",
    "description": "Produced by Carnegie Mellon University Advancement<br />Lighting Designer & Production Consultant: <b>Sam Molitoriss</b><br />Photos courtesy of CMU Marketing",
    "column": "live",
    "images": [
      "live/2018tepperquadopening/tepper_quad_opening-1.jpg",
      "live/2018tepperquadopening/tepper_quad_opening-2.jpg",
      "live/2018tepperquadopening/tepper_quad_opening-3.jpg",
      "live/2018tepperquadopening/tepper_quad_opening-4.jpg",
      "live/2018tepperquadopening/tepper_quad_opening-5.jpg"
    ]
  },
  {
    "name": "GMC Sierra AT4 Press Reveal",
    "year": "2018",
    "venue": "Pier 36, New York City, 2018",
    "blurb": "The press reveal of the 2019 GMC Sierra AT4. The event had a salon/cocktail area with current Sierra models, then moved into a presentation and reveal.",
    "position": "Associate Lighting Designer",
    "description": "Lighting Design: Jim Tetlow<br />Associate Lighting Design: <b>Sam Molitoriss</b>",
    "column": "live",
    "images": [
      "live/2018gmcsierrapress/gmc_sierra_at4-1.jpg",
      "live/2018gmcsierrapress/gmc_sierra_at4-2.jpg",
      "live/2018gmcsierrapress/gmc_sierra_at4-3.jpg"
    ]
  },
  {
    "name": "Playground XV Opening Ceremony",
    "year": "2018",
    "venue": "Purnell Center Lobby, 2017",
    "blurb": "",
    "position": "Lighting Designer",
    "description": "Lighting Design: <b>Sam Molitoriss</b>, Kenny Cohen<br />Scenic Design: Henry Blazer<br />Sound Design: Scott MacDonald<br />Photos courtesy of <a href=\"https://www.lbsphoto.com\" target=\"_blank\">Louis Stein</a>",
    "column": "live",
    "images": [
      "live/2017playgroundxv/playgroundxv-1.jpg",
      "live/2017playgroundxv/playgroundxv-2.jpg",
      "live/2017playgroundxv/playgroundxv-3.jpg",
      "live/2017playgroundxv/playgroundxv-4.jpg",
      "live/2017playgroundxv/playgroundxv-5.jpg",
      "live/2017playgroundxv/playgroundxv-6.jpg"
    ]
  },
  {
    "name": "Tangential Antibodies",
    "year": "2019",
    "venue": "Helen Wayne Rauh Studio Theater, 2019",
    "blurb": "",
    "position": "Lighting Designer",
    "description": "Choreographed by Emily Suarez<br />Lighting Design: <b>Sam Molitoriss</b><br />Photos courtesy of <a href=\"https://www.lbsphoto.com\" target=\"_blank\">Louis Stein</a>",
    "column": "dance",
    "images": [
      "dance/2019tangential/tangential1.jpg",
      "dance/2019tangential/tangential2.jpg",
      "dance/2019tangential/tangential3.jpg",
      "dance/2019tangential/tangential4.jpg"
    ]
  },
  {
    "name": "Healed",
    "year": "2018",
    "venue": "Helen Wayne Rauh Studio Theater, 2018",
    "blurb": "Set to a relentless metronome, this piece explores the journey of someone struggling to escape the judgements and negativity that society places on us. Utilizing soft amber sides and moving to a lurid deep orange, the lighting showed the emotional weight that society creates.",
    "position": "Lighting Designer",
    "description": "Choreographed by Ramsey Pack<br />Lighting Design: <b>Sam Molitoriss</b><br />Photos courtesy of <a href=\"https://www.lbsphoto.com\" target=\"_blank\">Louis Stein</a>",
    "column": "dance",
    "images": [
      "dance/2018healed/healed-2.jpg",
      "dance/2018healed/healed-1.jpg",
      "dance/2018healed/healed-3.jpg"/*,
      "dance/2018healed/healed-4.jpg"*/
    ]
  },
  {
    "name": "Woneyed Herds",
    "year": "2018",
    "venue": "Helen Wayne Rauh Studio Theater, 2018",
    "blurb": "This dance expressed the ability of kindness and support to lift someone out of a sad spot in life. Going from a dark and bleak look, the lighting grows and eventually blossoms with the dancers, settling in a rich, resolved state.",
    "position": "Lighing Designer",
    "description": "Choreographed by Georgia Mendes<br />Lighting Design: <b>Sam Molitoriss</b><br />Photos courtesy of <a href=\"https://www.lbsphoto.com\" target=\"_blank\">Louis Stein</a>",
    "column": "dance",
    "images": [
      "dance/2018woneyedherds/woneyed_herds-1.jpg",
      "dance/2018woneyedherds/woneyed_herds-2.jpg",
      "dance/2018woneyedherds/woneyed_herds-3.jpg",
      "dance/2018woneyedherds/woneyed_herds-4.jpg",
      "dance/2018woneyedherds/woneyed_herds-5.jpg"
    ]
  },
  {
    "name": "A Streetcar Named Desire",
    "year": "2016",
    "venue": "John Wells Video Studio, 2016",
    "blurb": "A mask movement piece based on the iconic play. Toning of the dancers in lurid palettes and careful development of silhouette reinforced the strong tension between characters and the physical and emotional pressure of the setting.",
    "position": "Lighting Designer",
    "description": "Adapted from the play by Tennessee Williams<br />Choreographed by Ralph Hall<br />Lighting Design: <b>Sam Molitoriss</b>, Jasmine Lesane<br />Photos courtesy of <a href=\"https://www.lbsphoto.com\" target=\"_blank\">Louis Stein</a>",
    "column": "dance",
    "images": [
      "dance/2016streetcar/streetcar-1.jpg",
      "dance/2016streetcar/streetcar-2.jpg",
      "dance/2016streetcar/streetcar-3.jpg",
      "dance/2016streetcar/streetcar-4.jpg",
      "dance/2016streetcar/streetcar-5.jpg",
      "dance/2016streetcar/streetcar-6.jpg",
      "dance/2016streetcar/streetcar-7.jpg"
    ]
  }
];

var NAME = "name";
var YEAR = "year";
var POSITION = "position";
var IMAGES = "images";
var COLUMN = "column";
var DESCRIPTION = "description";

for (var i = 0; i < events.length; i++) {
  var event = events[i];
  var name = event[NAME];
  var year = event[YEAR];
  var position = event[POSITION];
  var imagePath = "assets/img/" + event[IMAGES][0];
  var subtitle = year + " - " + position;
  
  var gridSquare = createGridSquare(name, subtitle, imagePath);
  gridSquare.id = i;

  gridSquare.addEventListener("click", function(e){
    var eventNumber = Number(e.target.id);
    showModal(events[eventNumber]);
  });

  var col = event[COLUMN];
  getColumn(col).appendChild(gridSquare);
}

function hideModal() {
  var overlay = document.getElementById("modal-overlay");
  var modal = document.getElementById("modal");
  modal.style.opacity = 0;
  overlay.style.opacity = 0;
  setTimeout(function (){
    modal.style.zIndex = -5;
    overlay.style.zIndex = -5;
  }, 700)
}

function showModal(event) {
  var name = event[NAME];
  var year = event[YEAR];
  var position = event[POSITION];
  var description = event[DESCRIPTION];
  var imagePath = "assets/img/" + event[IMAGES][0];
  var images = event[IMAGES];
  var subtitle = event["venue"];
  var overlay = document.getElementById("modal-overlay");
  var modal = document.getElementById("modal");
  document.getElementById("modal-title").innerText = name;
  document.getElementById("modal-subtitle").innerText = subtitle;
  document.getElementById("modal-blurb").innerText = event["blurb"];
  document.getElementById("modal-title-small").innerText = name;
  document.getElementById("modal-subtitle-small").innerText = subtitle;
  document.getElementById("modal-description").innerHTML = description;
  document.getElementById("modal-image-inner").src = imagePath;
  console.log(imagePath);
  setImageGallery(images);
  modal.style.opacity = 1;
  modal.style.zIndex = 5;
  overlay.style.opacity = 1;
  overlay.style.zIndex = 5;
}

function setImageGallery(images) {
  var modalRow = document.getElementById("modal-row");
  modalRow.innerHTML = "";
  for (var i = 0; i < images.length; i++ ) {
    var image = document.createElement("div");
    image.classList.add("image");
    var imagePath = images[i];
    image.setAttribute('data-path', imagePath);
    image.style.backgroundImage = "url(assets/img/" + imagePath + ")";
    image.addEventListener("click", function(e) {
      var style = window.getComputedStyle(e.target);
      document.getElementById("modal-image-inner").src = "assets/img/" + e.target.getAttribute('data-path');
      console.log(e.target.getAttribute('data-path'));
    });
    modalRow.appendChild(image);
  }
}


function createGridSquare(title, subtitle, imagePath) {
  var gridSquare = document.createElement("div");
  var titleDiv = document.createElement("div");
  var title = document.createElement("h1");
  title.innerText = name;
  titleDiv.appendChild(title);
  gridSquare.appendChild(titleDiv);
  gridSquare.classList.add("page");
  gridSquare.style.backgroundImage = "url(" + imagePath + ")";
  return gridSquare;
}

function getColumn(colName) {
  var column = null;
  if (col == "theatre") {
    column = document.getElementById("col-1");
  } else if (col == "live") {
    column = document.getElementById("col-2");
  } else if (col == "dance") {
    column = document.getElementById("col-3");
  }
  return column
}

var yTransform1 = 0;
document.getElementById("col-1").addEventListener("wheel", function(e) {
  var transform = getTransform(e.deltaY);
  yTransform1 += -1 * transform;
  yTransform2 += -1 * transform / 4;
  yTransform3 += -1 * transform / 8;
  setTransforms();
});

var yTransform2 = 0;
document.getElementById("col-2").addEventListener("wheel", function(e) {
  var transform = getTransform(e.deltaY);
  yTransform1 += -1 * transform / 4;
  yTransform2 += -1 * transform;
  yTransform3 += -1 * transform / 4;
  setTransforms();
});

var yTransform3 = 0;
document.getElementById("col-3").addEventListener("wheel", function(e) {
  var transform = getTransform(e.deltaY);
  yTransform1 += -1 * transform / 8;
  yTransform2 += -1 * transform / 4;
  yTransform3 += -1 * transform;
  setTransforms();
});

function getTransform(dy) {
  if (dy < 1 && dy > -1) {
    return dy * 60;
  } else {
    return dy;
  }
}

function dontUnderflow() {
  if (yTransform1 > 0) {
    yTransform1 = 0;
  }
  if (yTransform2 > 0) {
    yTransform2 = 0;
  }
  if (yTransform3 > 0) {
    yTransform3 = 0;
  }
}

function dontOverflow() {
  var col1Elements = document.querySelectorAll("#col-1 .page").length;
  var col2Elements = document.querySelectorAll("#col-2 .page").length;
  var col3Elements = document.querySelectorAll("#col-3 .page").length;
  var screenHeight = window.innerHeight - 170;
  var screenWidth = window.innerWidth;
  var cols = 3;
  if (screenWidth < 1000) {
    cols = 2;
  } else if (screenWidth < 700) {
    cols = 1;
  }
  var boxHeight = (((screenWidth) / cols) * 2 / 3) + 7;
  if ((yTransform1 - screenHeight) < -1 * (boxHeight * col1Elements)) {
    yTransform1 = -1 * ((boxHeight * col1Elements) - screenHeight);
  }
  if ((yTransform2 - screenHeight) < -1 * (boxHeight * col2Elements)) {
    yTransform2 = -1 * ((boxHeight * col2Elements) - screenHeight);
  }
  if ((yTransform3 - screenHeight) < -1 * (boxHeight * col3Elements)) {
    yTransform3 = -1 * ((boxHeight * col3Elements) - screenHeight);
  }
}

function setTransforms() {
  if (window.innerWidth < 700) {
    return;
  }
  dontOverflow();
  dontUnderflow();

  var column1 = document.getElementById("col-1");
  var column2 = document.getElementById("col-2");
  var column3 = document.getElementById("col-3");

  column1.style.transform = "translateY(" + yTransform1 + "px)";
  column2.style.transform = "translateY(" + yTransform2 + "px)";
  column3.style.transform = "translateY(" + yTransform3 + "px)";
  // For Webkit
  column1.style.webkitTransform = "translateY(" + yTransform1 + "px)";
  column2.style.webkitTransform = "translateY(" + yTransform2 + "px)";
  column3.style.webkitTransform = "translateY(" + yTransform3 + "px)";
  // For Opera
  column1.style.oTransform = "translateY(" + yTransform1 + "px)";
  column2.style.oTransform = "translateY(" + yTransform2 + "px)";
  column3.style.oTransform = "translateY(" + yTransform3 + "px)";
}

function zeroTransforms() {
  yTransform1 = 0;
  yTransform2 = 0;
  yTransform3 = 0;

  var column1 = document.getElementById("col-1");
  var column2 = document.getElementById("col-2");
  var column3 = document.getElementById("col-3");

  column1.style.transform = "translateY(" + yTransform1 + "px)";
  column2.style.transform = "translateY(" + yTransform2 + "px)";
  column3.style.transform = "translateY(" + yTransform3 + "px)";
  // For Webkit
  column1.style.webkitTransform = "translateY(" + yTransform1 + "px)";
  column2.style.webkitTransform = "translateY(" + yTransform2 + "px)";
  column3.style.webkitTransform = "translateY(" + yTransform3 + "px)";
  // For Opera
  column1.style.oTransform = "translateY(" + yTransform1 + "px)";
  column2.style.oTransform = "translateY(" + yTransform2 + "px)";
  column3.style.oTransform = "translateY(" + yTransform3 + "px)";
}

document.getElementById("modal-overlay").addEventListener("click", function() {
  hideModal();
});

window.addEventListener("resize", function(){
  console.log("Resizing");
  setTransforms();
  if (window.innerWidth < 700) {
    zeroTransforms()
  }
  window.scrollTo(0,0);
});
